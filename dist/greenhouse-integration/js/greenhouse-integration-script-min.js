!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!*
 * Plugin Name:       Anaplan Greenhouse Integration
 * Plugin URI:        https://careers.anaplan.com/
 * Description:       JS to work with Greenhouse API
 * Version:           1.2.1
 * Author:            Peter Berki
 * Author URI:        https://kumadev.com
 * License:           GPL-2.0+
 * License URI:       http://www.gnu.org/licenses/gpl-2.0.txt
 * Text Domain:       anaplan
 * Domain Path:       /languages
 * Test URL Path:     window.location.href + ?filter=true;category=Engineering;city=San%20Francisco;country=United&20States
 */jQuery(document).ready((function(e){var t=window.location.href,o=(t=t.substr(0,t.indexOf(".com")+4))+"/jobs/?id=",n=function(e,t,r,o){this.title=e,this.categoryArr=t,this.appendID=r,this.markup=o},a=function(e,t){this.query=e,this.amount=t},i=[],l=function(t,r){var o=e(r).length,n=e(t).length;o===n?e("#job-list-total").html("<p>Displaying ${amount} entries".replace(/\$\{amount\}/gi,"<strong>all</strong>")):e("#job-list-total").html("<p>Displaying ${amount} entries".replace(/\$\{amount\}/gi,"<strong>"+o+"</strong> of <strong>"+n+"</strong>"))},s=window.location.href;if(s.indexOf("/jobs/")>0){var c=s.substr(s.indexOf("?id=")+4,s.length);if(-1!==s.indexOf("?id=")){e("#job-background").css("opacity",0);var u="https://boards-api.greenhouse.io/v1/boards/anaplan/jobs/"+c;e.ajax({url:u}).done((function(t){console.log(t.content);var r=t.content.replace(/&lt;/gi,"<");r=(r=(r=(r=r.replace(/&gt;/gi,">")).replace(/&quot;/gi,'"')).replace(/\&amp\;nbsp\;/gi," ")).replace(/\&amp\;amp\;/gi,"&"),console.log(r),e("#job-title").find("h1").html(t.title),e("#job-title-content").find("h3").html(t.title),e("#job-location").find("h3").html(t.location.name.trim()),e("#job-location-content").find("h5").html(t.location.name.trim()),e("#job-content").html(r),e("#job-greenhouse-href").attr("href",t.absolute_url),String.prototype.tagRemoval=function(){var e=this.replace(/(\<strong\>.*\<\/strong\>)|(\<strong\>)|(\<\/strong\>)/gi,"");return e=e.replace(/(\<ul\>)|(\<\/ul\>)|(\<li\>)|(\<\/li\>)|(\<p\>)|(\<\/p\>)|(\<h1\>)|(\<h2\>)|(\<h3\>)|(\<\/h3\>)|(\<\/h1\>)|(\<\/h2\>)/gi,"")},String.prototype.trunc=function(e,t){var r=this.length>e,o=r?this.substr(0,e-1):this;return o=t&&r?o.substr(0,o.lastIndexOf(" ")):o+" ..."};var n=r.tagRemoval().trunc(240,!1);if(n.length>1){e("meta[name=description]").remove();var a=document.createElement("meta");a.name="description",a.content=n,e("head").append(a);!function e(t,r){t.length>r&&e(t,++r)}(e("meta"),0)}var i="/wp-content/uploads/2018/12/solution_IT_feature.jpg",l="/wp-content/uploads/2018/12/solution_sales_feature.jpg";switch(t.departments[0].name){case"Engineering":var s=i;break;case"IT":s=i;break;case"Technical Operations":s=i;break;case"Field Sales":s=l;break;case"Inside Sales":s=l;break;case"Sales Development":s=l;break;case"Pre-Sales":s=l;break;case"Marketing":s=l;break;default:s="/wp-content/uploads/2018/12/solution_supplyChain_feature.jpg"}e("#job-background").css({"background-image":"url("+s+")"}),setTimeout((function(){e("#job-background").css("opacity",1)}),250);var u=t.departments[0].name;e.getJSON("https://boards-api.greenhouse.io/v1/boards/anaplan/departments/",(function(t){e.each(t.departments,(function(r,n){var a=[],i="<div class='job-related--row'><p id='job-related--title' class='job-related--title'><a href='${job-href}'>${job-title}</a></p><p id='job-related--location' class='job-related--location'>${job-location}</p></div>",l=function(e){var t=o+e.id,r=i.replace(/\$\{job-title\}/gi,e.title);return r=(r=r.replace(/\$\{job-location\}/gi,e.location.name)).replace(/\$\{job-href\}/gi,t)};if(t.departments[r].name===u){!function r(o,n){a.length<2&&n<t.departments.length?(e.each(t.departments[n].jobs,(function(e,t){if(t.id!==parseInt(c)&&e<=5){var r=l(t);a.push(r)}})),r(o,++n)):a.length<2&&n===t.departments.length&&(n=o,e.each(t.departments[n].jobs,(function(e,t){if(t.id!==parseInt(c)&&e<=5){var r=l(t);a.push(r)}})),r(o,++n))}(0,r),e("#job-related-attach").html(a.join(""))}}))}))})).fail((function(){window.location.href=window.location.href.substr(0,window.location.href.indexOf("/jobs"))+"/job-listing/"}))}else window.location.href=window.location.href.substr(0,window.location.href.indexOf("/jobs"))+"/job-listing/"}else-1!==s.indexOf("/engineering")?s+="?filter=true;category=Eng%20Ops&Cloud%20Platform%20Engineering&Experience%20and%20Applications%20Engineering&Product%20Management%20and%20User%20Experience&Product,%20UX,%20and%20Engineering&Planning%20AI":-1!==s.indexOf("/sales")&&(s+="?filter=true;category=Field%20Sales&Pre-Sales&Sales%20Development"),e.getJSON("https://boards-api.greenhouse.io/v1/boards/anaplan/departments/",(function(t){var r=0,s=0,c=0,u=0,p=0,f=0,h=[],d=[],b=[],g=[],m=[],j=[],w="<li><span class='item-title-checkbox'><input name='${value}' value='${value}' type='checkbox' /><label>${display}</label></span><span class='item-amount'><span class='item-amount-container'>${amount}</span></span></li>",y="<div data-search='${search}' data-category='${category}' data-city='${city}' data-country='${country}' data-title='${job-data-title}' class='job-list-row job-list-row--active job-list-row--filtered'><div class='job-list-column job-list-column--large'><p><a href='${job-href}'>${job-title}</a></p></div><div class='job-list-column job-list-column--small'><p>${category}</p></div><div class='job-list-column job-list-column--small'><p>${location}</p></div></div>",v=function e(t,r,o){var n=t;if(r.length<1){var i=new a(n,1);r.push(i)}else if(o<r.length){if(n===r[o].query)return r[o].amount+=1,!1;e(t,r,++o)}else{i=new a(n,1);r.push(i)}};e.each(t.departments,(function(t,n){if(n.jobs.length>0&&"Template"!==n.name){var i=new a(n.name.replace("Inside Sales","Sales Development"),n.jobs.length);m.push(i),e.each(n.jobs,(function(e,t){var r=new a(t.title,1);g.push(r)}));var l=n.jobs.map((function(e,t){var r=e.location.name.split(","),n=o+e.id,a=e.location.name.trim().toLowerCase()+","+e.title.toLowerCase();if(r.length>1){var l=r[0].trim().replace(/(\s-)|(-\s)/gi,"-"),s=r[1].trim().replace(/(\s-)|(-\s)/gi,"-");v(l,b,0),v(s,d,0),c=(c=y.replace(/\$\{city\}/gi,l.toLowerCase())).replace(/\$\{country\}/gi,s.toLowerCase())}else{s=r[0].trim().replace(/(\s-)|(-\s)/gi,"-");v(r[0],d,0);var c=y.replace(/\$\{country\}/gi,s.toLowerCase())}return(c=(c=(c=(c=(c=c.replace(/\$\{job-href\}/gi,n)).replace(/\$\{job-title\}/gi,e.title)).replace(/\$\{job-data-title\}/gi,e.title.toLowerCase())).replace(/\$\{location\}/gi,e.location.name.trim())).replace(/\$\{search\}/gi,a+i.query.trim().toLowerCase())).replace(/\$\{category\}/gi,i.query.trim().toLowerCase())}));j.push(l.join(""))}r+=n.jobs.length;if(console.log("val.name = "+n.name),/engineering|eng|experience|ai/gi.test(n.name)){s+=n.jobs.length;var w=new a("engineering",s);h.push(w)}else if(/sales/gi.test(n.name)){c+=n.jobs.length;w=new a("sales",c);h.push(w)}if("Customer Success"===n.name.trim()){f+=n.jobs.length;w=new a("customer success",f);h.push(w)}else if("Pre-Sales"===n.name.trim()){u+=n.jobs.length;w=new a("pre-sales",u);h.push(w)}else if("Field Sales"===n.name.trim()){p+=n.jobs.length;w=new a("field sales",p);h.push(w)}})),e("<div/>",{html:j.join("")}).appendTo("#job-attach");var q=function(e){return e.sort((function(e,t){var r=e.query.toUpperCase(),o=t.query.toUpperCase();return r<o?-1:r>o?1:0}))};d=q(d),b=q(b);var $=new n("Category",m,"category",w),x=new n("Country",d,"country",w),C=new n("City",b,"city",w);new n("Title",g,"title","<li style='display:none;'><span class='item-title-checkbox'><input name='${value}' value='${value}' type='checkbox' /><label>${display}</label></span><span class='item-amount'><span class='item-amount-container'>${amount}</span></span></li>");i.push($),i.push(x),i.push(C);var k=new a("all",r);h.push(k),e.each(h,(function(t,r){!function(t){e('*[data-job-type="'+t.query+'"]').html(t.amount)}(r)}));!function t(r,o){if(o<r.length){var n=r[o].categoryArr,a=r[o].markup,i=n.map((function(e,t){var r=a.replace(/\$\{value\}/gi,e.query.toLowerCase());return(r=r.replace(/\$\{display\}/gi,e.query)).replace(/\$\{amount\}/gi,e.amount)}));e("<ul/>",{html:i.join("")}).appendTo("#"+r[o].appendID),t(r,++o)}}(i,0),l(".job-list-row",".job-list-row--active.job-list-row--filtered")}));var p=function(){var t=window.location.href;-1===window.location.href.indexOf("?search")&&e(".job-list-row").each((function(t,r){e(r).removeClass("job-list-row--search-exempt")}));var r=[],o=[],n=function(e){this.query=e,this.arr=[]},a=function e(t,r,o){r<t.length&&(t.eq(r).hasClass(o)||(t.eq(r).removeClass("job-list-row--active"),t.eq(r).removeClass("job-list-row--filtered")),e(t,++r,o))},i=e("*[type='checkbox']");a(e(".job-list-row"),0,"job-list-row--title"),function e(t,o){if(o<t.length){if(!0===t.eq(o).prop("checked")&&void 0===t.eq(o).attr("id")){var a,i=t.eq(o).attr("value").trim(),l=t.eq(o).parents(".item-list").attr("id").trim();if(r.length>0)(a=new n(l)).arr.push(i),function e(t,o,n){o<t.length&&(t[o].query.trim()===n.query.trim()?t[o].arr.push(n.arr[0]):o+1===t.length&&t[o].query.trim()!==n.query.trim()?r.push(n):e(t,++o,n))}(r,0,a);else(a=new n(l)).arr.push(i),r.push(a)}e(t,++o)}}(i,0);var s=function e(t,r,n){if(r<t.length){var a="<span class='job-filter-button job-filter-button--${color}' data-${query}='${filter}'>${filter} <span class='job-filter-button--delete'>x</span></span>";a=(a=(a="category"===n?a.replace(/\$\{color\}/gi,"blue"):"search"===n?a.replace(/\$\{color\}/gi,"grey"):a.replace(/\$\{color\}/gi,"green")).replace(/\$\{filter\}/gi,t[r])).replace(/\$\{query\}/gi,n),o.push(a),e(t,++r,n)}},c=function t(r,o,n){o<r.length&&(e("*[data-"+n+"='"+r[o]+"']").each((function(t,r){e(r).eq(0).hasClass("job-list-row--search-exempt")||e(r).eq(0).addClass("job-list-row--filtered")})),t(r,++o,n))},u=function t(r,o,n){o<r.length&&(e("*[data-"+n+"='"+r[o]+"']").each((function(t,r){e(r).eq(0).hasClass("job-list-row--search-exempt")||e(r).eq(0).addClass("job-list-row--active")})),t(r,++o,n))};0===r.length&&-1===t.indexOf("?search")?(a(e(".job-list-row"),0,"job-list-row--title"),function e(t,r,o){r<t.length&&(t.eq(r).hasClass(o)||(t.eq(r).addClass("job-list-row--active"),t.eq(r).addClass("job-list-row--filtered")),e(t,++r,o))}(e(".job-list-row"),0,"job-list-row--title"),e("#job-filter-buttons").html("")):-1===t.indexOf("?search")?function t(r,n){n<r.length&&(0===n&&1!==r.length?(u(r[n].arr,0,r[n].query),s(r[n].arr,0,r[n].query)):0===n&&"category"===r[n].query&&1===r.length?(u(r[n].arr,0,r[n].query),c(r[n].arr,0,r[n].query),s(r[n].arr,0,r[n].query)):n>0?(c(r[n].arr,0,r[n].query),s(r[n].arr,0,r[n].query)):0===n&&1===r.length&&(u(r[n].arr,0,r[n].query),c(r[n].arr,0,r[n].query),s(r[n].arr,0,r[n].query)),t(r,++n)),e("#job-filter-buttons").html(o.join(""))}(r,0):g(t),l(".job-list-row",".job-list-row--active.job-list-row--filtered")},f=function(t){var o=[],n=[],a=e("*[type='checkbox']"),i=function(e){this.query=e,this.arr=[]},s=function e(t,r,o){r<t.length&&(t.eq(r).hasClass(o)||t.eq(r).hasClass("job-list-row--search-exempt")||(t.eq(r).removeClass("job-list-row--active"),t.eq(r).removeClass("job-list-row--filtered")),e(t,++r,o))};s(e(".job-list-row"),0,"job-list-row--title"),function e(t,r){if(r<t.length){if(!0===t.eq(r).prop("checked")&&void 0===t.eq(r).attr("id")){var n,a=t.eq(r).attr("value").trim(),l=t.eq(r).parents(".item-list").attr("id").trim();if(o.length>0)(n=new i(l)).arr.push(a),function e(t,r,n){r<t.length&&(t[r].query.trim()===n.query.trim()?t[r].arr.push(n.arr[0]):r+1===t.length&&t[r].query.trim()!==n.query.trim()?o.push(n):e(t,++r,n))}(o,0,n);else(n=new i(l)).arr.push(a),o.push(n)}e(t,++r)}}(a,0);var c,u=function e(t,o,a){var i="<span class='job-filter-button job-filter-button--${color}' data-${query}='${filter}'>${filter} <span class='job-filter-button--delete'>x</span></span>";i="category"===a?i.replace(/\$\{color\}/gi,"blue"):"search"===a?i.replace(/\$\{color\}/gi,"grey"):i.replace(/\$\{color\}/gi,"green"),o<t.length&&"object"===r(t)?(i=(i=i.replace(/\$\{filter\}/gi,t[o])).replace(/\$\{query\}/gi,a),n.push(i),e(t,++o,a)):"string"==typeof t&&(i=(i=i.replace(/\$\{filter\}/gi,t)).replace(/\$\{query\}/gi,a),n.push(i))},p=function t(r,o,n){o<r.length&&(e("*[data-"+n+"='"+r[o]+"']").each((function(t,r){e(r).eq(0).hasClass("job-list-row--search-exempt")||e(r).eq(0).addClass("job-list-row--filtered")})),t(r,++o,n))},f=function t(r,o,n){o<r.length&&(e("*[data-"+n+"='"+r[o]+"']").each((function(t,r){e(r).eq(0).hasClass("job-list-row--search-exempt")||e(r).eq(0).addClass("job-list-row--active")})),t(r,++o,n))};if(0===o.length){s(e(".job-list-row"),0,"job-list-row--title"),function e(t,r,o){r<t.length&&(t.eq(r).hasClass(o)||t.eq(r).hasClass("job-list-row--search-exempt")||(t.eq(r).addClass("job-list-row--active"),t.eq(r).addClass("job-list-row--filtered")),e(t,++r,o))}(e(".job-list-row"),0,"job-list-row--title"),e("#job-filter-buttons").html("");var h=t.substr(t.indexOf("?search=")+8,t.length).replace(/\%20/gi," ");c=(c="<span class='job-filter-button job-filter-button--grey' data-search='${filter}'>${filter} <span class='job-filter-button--delete'>x</span></span>").replace(/\$\{filter\}/gi,h),e("#job-filter-buttons").html(c)}else{h=t.substr(t.indexOf("?search=")+8,t.length).replace(/\%20/gi," ");u(h,0,"search"),function t(r,o){o<r.length&&(0===o&&1!==r.length?(f(r[o].arr,0,r[o].query),u(r[o].arr,0,r[o].query)):0===o&&"category"===r[o].query&&1===r.length?(f(r[o].arr,0,r[o].query),p(r[o].arr,0,r[o].query),u(r[o].arr,0,r[o].query)):o>0?(p(r[o].arr,0,r[o].query),u(r[o].arr,0,r[o].query)):0===o&&1===r.length&&(f(r[o].arr,0,r[o].query),p(r[o].arr,0,r[o].query),u(r[o].arr,0,r[o].query)),t(r,++o)),e("#job-filter-buttons").html(n.join(""))}(o,0)}l(".job-list-row",".job-list-row--active.job-list-row--filtered")},h=!1,d=function t(r,o){o<r.length&&(e("*[value='"+r[o].replace(/%20/gi," ").toLowerCase()+"']").eq(0).prop("checked",!0),t(r,++o))},b=function(e){if(-1!==e.indexOf("?filter=true;")){var t=e.substr(e.indexOf("?filter=true;")+13,e.length);!function e(t,r){if(r<t.length){var o=t[r].substr(t[r].indexOf("=")+1,t[r].length).split("&");d(o,0),e(t,++r)}}(t.substr(0,t.length).split(";"),0),p()}};!function t(r){!1!==h||-1===r.indexOf("?filter=true;")&&-1===r.indexOf("?search")?!0===h&&-1!==r.indexOf("?filter=true;")?b(r):!0===h&&-1!==r.indexOf("?search")&&g(s):(e("*[type='checkbox']").length>0?h=!0:pageload=!1,setTimeout((function(){t(r)}),500))}(s);var g=function(t){var r=t.substr(t.indexOf("?search=")+8,t.length).replace(/\%20/gi," ");r=decodeURIComponent(r);var o,n=e(".job-list-row"),a=new RegExp(r,"gi");o=(o="<span class='job-filter-button job-filter-button--grey' data-search='${filter}'>${filter} <span class='job-filter-button--delete'>x</span></span>").replace(/\$\{filter\}/gi,r),e("#job-filter-buttons").html(o),e.each(n,(function(t,r){var o=e(r).attr("data-search");!0===a.test(o)?e(r).addClass("job-list-row--filtered"):!1===a.test(o)&&(e(r).removeClass("job-list-row--filtered"),e(r).addClass("job-list-row--search-exempt"))})),l(".job-list-row",".job-list-row--active.job-list-row--filtered")};e(document).on("submit","#career-search-form",(function(t){t.preventDefault();var r=window.location.href,o=r.substr(0,r.indexOf(".com")+4);window.location.href=o+"/job-listing/?search="+e("#form-field-name").val().trim()})),e(document).on("click","*[type='checkbox']",(function(e){var t=window.location.href;-1===t.indexOf("?search")?p():f(t)})),e(document).on("click",".job-filter-button",(function(t){t.preventDefault(),e.each(e(this).data(),(function(t,r){"search"!==t.trim()?e("#"+t).find("*[value='"+r+"']").prop("checked",!1):history.pushState(null,null,"/job-listing/")}));var r=window.location.href;-1===r.indexOf("?search")?p():f(r)}));var m=e("img"),j=e("iframe"),w=function t(r,o){if(o<r.length){if(parseFloat(e(window).scrollTop()+window.innerHeight)>r.eq(o).offset().top-200&&void 0===r.eq(o).attr("src")){var n=r.eq(o).attr("data-src");r.eq(o).attr("src",n),r.eq(o).css("opacity","1")}t(r,++o)}},y=function t(r,o,n){if(o<r.length){if(parseFloat(e(window).scrollTop()+window.innerHeight)>r.eq(o).offset().top-200){var a=r.eq(o).attr("data-src");void 0!==n?r.eq(o).find(n).css({"background-image":"url("+a+")","background-position":"background-position","background-size":"cover"}):r.eq(o).css({"background-image":"url("+a+")","background-position":"background-position","background-size":"cover"})}t(r,++o,n)}};w(m,0),w(j,0),y(e(".flip-card-front"),0,".elementor-flip-box__front"),y(e(".background-image-elements"),0);new Date;console.log("Script update August 4th, 2020"),e(window).scroll((function(){var t=e("img"),r=e("iframe");w(t,0),w(r,0),y(e(".flip-card-front"),0,".elementor-flip-box__front"),y(e(".background-image-elements"),0)}))}))}]);